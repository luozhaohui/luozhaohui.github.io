<?xml version="1.0" encoding="utf-8" standalone="no"?><!DOCTYPE svg PUBLIC "-//W3C//DTD SVG 20010904//EN" "http://www.w3.org/TR/2001/REC-SVG-20010904/DTD/svg10.dtd"><svg xmlns="http://www.w3.org/2000/svg" width="3220" height="2911" xmlns:xlink="http://www.w3.org/1999/xlink"><source><![CDATA[mvsd_main->executor: executor.menu()
Note right of executor: menu():\ndo_initchain()\nrun()
Note right of executor: do_initchain():\ncreate_genesis_block()\ndata_base.initialize()

### START
executor->server_node: server_node.start(handle_started)
server_node-->p2p_node: super.start(result_handler)
Note right of p2p_node: start():\nblock_chain_impl.start()
p2p_node-->p2p: super.start(result_handler)

Note right of p2p: threadpool.spawn()\nsubscriber.start()\nattach_manual_session()
p2p->session_manual: session_manual.start(handle_manual_started)
Note right of session_manual: handle_started():\ncreate_connector
session_manual-->p2p: callback: handle_manual_started

Note right of p2p: handle_manual_started():\nthreadpool.start()\nhandle_hosts_loaded(result_handler)\nattach_seed_session()
p2p->session_seed: session_seed.start(handle_started)
Note right of session_seed: handle_started():\naddress_count(handle_count)\nsession.address_count(handle_count)
session_seed->p2p: network_.address_count(handle_count)
p2p-->session_seed: callback: handle_count(hosts_->count())
Note right of session_seed: start_seeding(result_handler)\nstart_seed()\nconnect->connect()\nhandle_connect()\nhandle_complete(result_handler)
session_seed-->p2p: callback: handle_started
Note right of p2p: handle_started()
p2p-->executor: callback: handle_started

### RUN
Note right of executor: handle_started
executor->server_node: server_node.subscribe_stop(handle_stopped)
executor->server_node: server_node.run(handle_running)
Note right of server_node: run():\nHttp_server.start()\nWebsocket_server.start()
Note right of p2p: start upnp map port
server_node-->p2p_node: super.run(handle_running)

Note right of p2p_node: run():\nattach_header_sync_session()
p2p_node->session_header_sync: header_sync.start(handle_headers_synchronized)
Note right of session_header_sync: handle_started():\ninitialize()\nnew_connection()\nconnect(handle_connect)
session_header_sync-->p2p_node: callback: handle_headers_synchronized

Note right of p2p_node: handle_headers_synchronized():\nattach_block_sync_session()
p2p_node->session_block_sync: block_sync.start(handle_running)
Note right of session_block_sync: handle_started():\nconnect reservation table
session_block_sync-->p2p_node: callback: handle_running

Note right of p2p_node: handle_running():\nsubscribe_blockchain(handle_reorganized)
p2p_node->p2p: p2p.run()
Note right of p2p: run():\nconnect peers\nattach_inbound_session()

p2p->session_inbound: inbound.start(handle_inbound_started)
Note right of session_inbound: handle_started():\ncreate_acceptor()\nacceptor.listen(inbound_port)
session_inbound-->p2p: callback: handle_inbound_started

Note right of p2p: handle_inbound_started():\nattach_outbound_session()
p2p->session_outbound: outbound.start(handle_running)
Note right of session_outbound: handle_started():\nconnect outbound_connections
session_outbound-->p2p: callback: handle_running
Note right of p2p: handle_running()
p2p-->server_node: callback: handle_running

Note right of server_node: handle_running():\nstart_services()
Note right of server_node: start_services():\nstart_authenticator()\nstart_query_services()\nstart_heartbeat_services()\nstart_block_services()\nstart_transaction_services()
server_node-->executor: callback: handle_running
Note right of executor: handle_running()

]]></source><desc></desc><defs><marker viewBox="0 0 5 5" markerWidth="5" markerHeight="5" orient="auto" refX="5" refY="2.5" id="markerArrowBlock"><path d="M 0 0 L 5 2.5 L 0 5 z"></path></marker><marker viewBox="0 0 9.6 16" markerWidth="4" markerHeight="16" orient="auto" refX="9.6" refY="8" id="markerArrowOpen"><path d="M 9.6,8 1.92,16 0,13.7 5.76,8 0,2.286 1.92,0 9.6,8 z"></path></marker></defs><g class="title"></g><g class="actor"><rect x="10" y="20" width="92.65625" height="36" stroke="#000000" fill="#ffffff" style="stroke-width: 2;"></rect><text x="20.65625" y="44" style="font-size: 16px; font-family: &quot;Andale Mono&quot;, monospace;"><tspan x="20">mvsd_main</tspan></text></g><g class="actor"><rect x="10" y="2855.40625" width="92.65625" height="36" stroke="#000000" fill="#ffffff" style="stroke-width: 2;"></rect><text x="20.65625" y="2879.40625" style="font-size: 16px; font-family: &quot;Andale Mono&quot;, monospace;"><tspan x="20">mvsd_main</tspan></text></g><line x1="56.328125" x2="56.328125" y1="56" y2="2855.40625" stroke="#000000" fill="none" style="stroke-width: 2;"></line><g class="actor"><rect x="154.328125" y="20" width="84" height="36" stroke="#000000" fill="#ffffff" style="stroke-width: 2;"></rect><text x="164.328125" y="44" style="font-size: 16px; font-family: &quot;Andale Mono&quot;, monospace;"><tspan x="164.328125">executor</tspan></text></g><g class="actor"><rect x="154.328125" y="2855.40625" width="84" height="36" stroke="#000000" fill="#ffffff" style="stroke-width: 2;"></rect><text x="164.328125" y="2879.40625" style="font-size: 16px; font-family: &quot;Andale Mono&quot;, monospace;"><tspan x="164.328125">executor</tspan></text></g><line x1="196.328125" x2="196.328125" y1="56" y2="2855.40625" stroke="#000000" fill="none" style="stroke-width: 2;"></line><g class="actor"><rect x="498.328125" y="20" width="108" height="36" stroke="#000000" fill="#ffffff" style="stroke-width: 2;"></rect><text x="508.328125" y="44" style="font-size: 16px; font-family: &quot;Andale Mono&quot;, monospace;"><tspan x="508.328125">server_node</tspan></text></g><g class="actor"><rect x="498.328125" y="2855.40625" width="108" height="36" stroke="#000000" fill="#ffffff" style="stroke-width: 2;"></rect><text x="508.328125" y="2879.40625" style="font-size: 16px; font-family: &quot;Andale Mono&quot;, monospace;"><tspan x="508.328125">server_node</tspan></text></g><line x1="552.328125" x2="552.328125" y1="56" y2="2855.40625" stroke="#000000" fill="none" style="stroke-width: 2;"></line><g class="actor"><rect x="784.328125" y="20" width="84" height="36" stroke="#000000" fill="#ffffff" style="stroke-width: 2;"></rect><text x="794.328125" y="44" style="font-size: 16px; font-family: &quot;Andale Mono&quot;, monospace;"><tspan x="794.328125">p2p_node</tspan></text></g><g class="actor"><rect x="784.328125" y="2855.40625" width="84" height="36" stroke="#000000" fill="#ffffff" style="stroke-width: 2;"></rect><text x="794.328125" y="2879.40625" style="font-size: 16px; font-family: &quot;Andale Mono&quot;, monospace;"><tspan x="794.328125">p2p_node</tspan></text></g><line x1="826.328125" x2="826.328125" y1="56" y2="2855.40625" stroke="#000000" fill="none" style="stroke-width: 2;"></line><g class="actor"><rect x="1174.328125" y="20" width="44" height="36" stroke="#000000" fill="#ffffff" style="stroke-width: 2;"></rect><text x="1184.328125" y="44" style="font-size: 16px; font-family: &quot;Andale Mono&quot;, monospace;"><tspan x="1184.328125">p2p</tspan></text></g><g class="actor"><rect x="1174.328125" y="2855.40625" width="44" height="36" stroke="#000000" fill="#ffffff" style="stroke-width: 2;"></rect><text x="1184.328125" y="2879.40625" style="font-size: 16px; font-family: &quot;Andale Mono&quot;, monospace;"><tspan x="1184.328125">p2p</tspan></text></g><line x1="1196.328125" x2="1196.328125" y1="56" y2="2855.40625" stroke="#000000" fill="none" style="stroke-width: 2;"></line><g class="actor"><rect x="1494.328125" y="20" width="132" height="36" stroke="#000000" fill="#ffffff" style="stroke-width: 2;"></rect><text x="1504.328125" y="44" style="font-size: 16px; font-family: &quot;Andale Mono&quot;, monospace;"><tspan x="1504.328125">session_manual</tspan></text></g><g class="actor"><rect x="1494.328125" y="2855.40625" width="132" height="36" stroke="#000000" fill="#ffffff" style="stroke-width: 2;"></rect><text x="1504.328125" y="2879.40625" style="font-size: 16px; font-family: &quot;Andale Mono&quot;, monospace;"><tspan x="1504.328125">session_manual</tspan></text></g><line x1="1560.328125" x2="1560.328125" y1="56" y2="2855.40625" stroke="#000000" fill="none" style="stroke-width: 2;"></line><g class="actor"><rect x="1688.328125" y="20" width="116" height="36" stroke="#000000" fill="#ffffff" style="stroke-width: 2;"></rect><text x="1698.328125" y="44" style="font-size: 16px; font-family: &quot;Andale Mono&quot;, monospace;"><tspan x="1698.328125">session_seed</tspan></text></g><g class="actor"><rect x="1688.328125" y="2855.40625" width="116" height="36" stroke="#000000" fill="#ffffff" style="stroke-width: 2;"></rect><text x="1698.328125" y="2879.40625" style="font-size: 16px; font-family: &quot;Andale Mono&quot;, monospace;"><tspan x="1698.328125">session_seed</tspan></text></g><line x1="1746.328125" x2="1746.328125" y1="56" y2="2855.40625" stroke="#000000" fill="none" style="stroke-width: 2;"></line><g class="actor"><rect x="1990.328125" y="20" width="172" height="36" stroke="#000000" fill="#ffffff" style="stroke-width: 2;"></rect><text x="2000.328125" y="44" style="font-size: 16px; font-family: &quot;Andale Mono&quot;, monospace;"><tspan x="2000.328125">session_header_sync</tspan></text></g><g class="actor"><rect x="1990.328125" y="2855.40625" width="172" height="36" stroke="#000000" fill="#ffffff" style="stroke-width: 2;"></rect><text x="2000.328125" y="2879.40625" style="font-size: 16px; font-family: &quot;Andale Mono&quot;, monospace;"><tspan x="2000.328125">session_header_sync</tspan></text></g><line x1="2076.328125" x2="2076.328125" y1="56" y2="2855.40625" stroke="#000000" fill="none" style="stroke-width: 2;"></line><g class="actor"><rect x="2228.328125" y="20" width="164" height="36" stroke="#000000" fill="#ffffff" style="stroke-width: 2;"></rect><text x="2238.328125" y="44" style="font-size: 16px; font-family: &quot;Andale Mono&quot;, monospace;"><tspan x="2238.328125">session_block_sync</tspan></text></g><g class="actor"><rect x="2228.328125" y="2855.40625" width="164" height="36" stroke="#000000" fill="#ffffff" style="stroke-width: 2;"></rect><text x="2238.328125" y="2879.40625" style="font-size: 16px; font-family: &quot;Andale Mono&quot;, monospace;"><tspan x="2238.328125">session_block_sync</tspan></text></g><line x1="2310.328125" x2="2310.328125" y1="56" y2="2855.40625" stroke="#000000" fill="none" style="stroke-width: 2;"></line><g class="actor"><rect x="2490.328125" y="20" width="140" height="36" stroke="#000000" fill="#ffffff" style="stroke-width: 2;"></rect><text x="2500.328125" y="44" style="font-size: 16px; font-family: &quot;Andale Mono&quot;, monospace;"><tspan x="2500.328125">session_inbound</tspan></text></g><g class="actor"><rect x="2490.328125" y="2855.40625" width="140" height="36" stroke="#000000" fill="#ffffff" style="stroke-width: 2;"></rect><text x="2500.328125" y="2879.40625" style="font-size: 16px; font-family: &quot;Andale Mono&quot;, monospace;"><tspan x="2500.328125">session_inbound</tspan></text></g><line x1="2560.328125" x2="2560.328125" y1="56" y2="2855.40625" stroke="#000000" fill="none" style="stroke-width: 2;"></line><g class="actor"><rect x="2768.328125" y="20" width="148" height="36" stroke="#000000" fill="#ffffff" style="stroke-width: 2;"></rect><text x="2778.328125" y="44" style="font-size: 16px; font-family: &quot;Andale Mono&quot;, monospace;"><tspan x="2778.328125">session_outbound</tspan></text></g><g class="actor"><rect x="2768.328125" y="2855.40625" width="148" height="36" stroke="#000000" fill="#ffffff" style="stroke-width: 2;"></rect><text x="2778.328125" y="2879.40625" style="font-size: 16px; font-family: &quot;Andale Mono&quot;, monospace;"><tspan x="2778.328125">session_outbound</tspan></text></g><line x1="2842.328125" x2="2842.328125" y1="56" y2="2855.40625" stroke="#000000" fill="none" style="stroke-width: 2;"></line><g class="signal"><text x="66.328125" y="87" style="font-size: 16px; font-family: &quot;Andale Mono&quot;, monospace;"><tspan x="66.328125">executor.menu()</tspan></text><line x1="56.328125" x2="196.328125" y1="92" y2="92" stroke="#000000" fill="none" style="stroke-width: 2; marker-end: url(&quot;#markerArrowBlock&quot;);"></line></g><g class="note"><rect x="216.328125" y="112" width="122.65625" height="64.390625" stroke="#000000" fill="#ffffff" style="stroke-width: 2;"></rect><text x="221.984375" y="131" style="font-size: 16px; font-family: &quot;Andale Mono&quot;, monospace;"><tspan x="221.328125">menu():</tspan><tspan dy="1.2em" x="221.328125">do_initchain()</tspan><tspan dy="1.2em" x="221.328125">run()</tspan></text></g><g class="note"><rect x="216.328125" y="196.390625" width="186" height="64.390625" stroke="#000000" fill="#ffffff" style="stroke-width: 2;"></rect><text x="221.328125" y="215.390625" style="font-size: 16px; font-family: &quot;Andale Mono&quot;, monospace;"><tspan x="221.328125">do_initchain():</tspan><tspan dy="1.2em" x="221.328125">create_genesis_block()</tspan><tspan dy="1.2em" x="221.328125">data_base.initialize()</tspan></text></g><g class="signal"><text x="242.328125" y="291.78125" style="font-size: 16px; font-family: &quot;Andale Mono&quot;, monospace;"><tspan x="242.328125">server_node.start(handle_started)</tspan></text><line x1="196.328125" x2="552.328125" y1="296.78125" y2="296.78125" stroke="#000000" fill="none" style="stroke-width: 2; marker-end: url(&quot;#markerArrowBlock&quot;);"></line></g><g class="signal"><text x="581.328125" y="327.78125" style="font-size: 16px; font-family: &quot;Andale Mono&quot;, monospace;"><tspan x="581.328125">super.start(result_handler)</tspan></text><line x1="552.328125" x2="826.328125" y1="332.78125" y2="332.78125" stroke="#000000" fill="none" style="stroke-width: 2; stroke-dasharray: 6, 2; marker-end: url(&quot;#markerArrowBlock&quot;);"></line></g><g class="note"><rect x="846.328125" y="352.78125" width="202" height="45.1875" stroke="#000000" fill="#ffffff" style="stroke-width: 2;"></rect><text x="851.328125" y="371.78125" style="font-size: 16px; font-family: &quot;Andale Mono&quot;, monospace;"><tspan x="851.328125">start():</tspan><tspan dy="1.2em" x="851.328125">block_chain_impl.start()</tspan></text></g><g class="signal"><text x="903.328125" y="428.96875" style="font-size: 16px; font-family: &quot;Andale Mono&quot;, monospace;"><tspan x="903.328125">super.start(result_handler)</tspan></text><line x1="826.328125" x2="1196.328125" y1="433.96875" y2="433.96875" stroke="#000000" fill="none" style="stroke-width: 2; stroke-dasharray: 6, 2; marker-end: url(&quot;#markerArrowBlock&quot;);"></line></g><g class="note"><rect x="1216.328125" y="453.96875" width="194" height="64.390625" stroke="#000000" fill="#ffffff" style="stroke-width: 2;"></rect><text x="1221.328125" y="472.96875" style="font-size: 16px; font-family: &quot;Andale Mono&quot;, monospace;"><tspan x="1221.328125">threadpool.spawn()</tspan><tspan dy="1.2em" x="1221.328125">subscriber.start()</tspan><tspan dy="1.2em" x="1221.328125">attach_manual_session()</tspan></text></g><g class="signal"><text x="1206.328125" y="549.359375" style="font-size: 16px; font-family: &quot;Andale Mono&quot;, monospace;"><tspan x="1206.328125">session_manual.start(handle_manual_started)</tspan></text><line x1="1196.328125" x2="1560.328125" y1="554.359375" y2="554.359375" stroke="#000000" fill="none" style="stroke-width: 2; marker-end: url(&quot;#markerArrowBlock&quot;);"></line></g><g class="note"><rect x="1580.328125" y="574.359375" width="146" height="45.1875" stroke="#000000" fill="#ffffff" style="stroke-width: 2;"></rect><text x="1585.328125" y="593.359375" style="font-size: 16px; font-family: &quot;Andale Mono&quot;, monospace;"><tspan x="1585.328125">handle_started():</tspan><tspan dy="1.2em" x="1585.328125">create_connector</tspan></text></g><g class="signal"><text x="1254.328125" y="650.546875" style="font-size: 16px; font-family: &quot;Andale Mono&quot;, monospace;"><tspan x="1254.328125">callback: handle_manual_started</tspan></text><line x1="1560.328125" x2="1196.328125" y1="655.546875" y2="655.546875" stroke="#000000" fill="none" style="stroke-width: 2; stroke-dasharray: 6, 2; marker-end: url(&quot;#markerArrowBlock&quot;);"></line></g><g class="note"><rect x="1216.328125" y="675.546875" width="290" height="83.59375" stroke="#000000" fill="#ffffff" style="stroke-width: 2;"></rect><text x="1221.328125" y="694.546875" style="font-size: 16px; font-family: &quot;Andale Mono&quot;, monospace;"><tspan x="1221.328125">handle_manual_started():</tspan><tspan dy="1.2em" x="1221.328125">threadpool.start()</tspan><tspan dy="1.2em" x="1221.328125">handle_hosts_loaded(result_handler)</tspan><tspan dy="1.2em" x="1221.328125">attach_seed_session()</tspan></text></g><g class="signal"><text x="1335.328125" y="790.140625" style="font-size: 16px; font-family: &quot;Andale Mono&quot;, monospace;"><tspan x="1335.328125">session_seed.start(handle_started)</tspan></text><line x1="1196.328125" x2="1746.328125" y1="795.140625" y2="795.140625" stroke="#000000" fill="none" style="stroke-width: 2; marker-end: url(&quot;#markerArrowBlock&quot;);"></line></g><g class="note"><rect x="1766.328125" y="815.140625" width="290" height="64.390625" stroke="#000000" fill="#ffffff" style="stroke-width: 2;"></rect><text x="1771.328125" y="834.140625" style="font-size: 16px; font-family: &quot;Andale Mono&quot;, monospace;"><tspan x="1771.328125">handle_started():</tspan><tspan dy="1.2em" x="1771.328125">address_count(handle_count)</tspan><tspan dy="1.2em" x="1771.328125">session.address_count(handle_count)</tspan></text></g><g class="signal"><text x="1327.328125" y="910.53125" style="font-size: 16px; font-family: &quot;Andale Mono&quot;, monospace;"><tspan x="1327.328125">network_.address_count(handle_count)</tspan></text><line x1="1746.328125" x2="1196.328125" y1="915.53125" y2="915.53125" stroke="#000000" fill="none" style="stroke-width: 2; marker-end: url(&quot;#markerArrowBlock&quot;);"></line></g><g class="signal"><text x="1315.328125" y="946.53125" style="font-size: 16px; font-family: &quot;Andale Mono&quot;, monospace;"><tspan x="1315.328125">callback: handle_count(hosts_-&gt;count())</tspan></text><line x1="1196.328125" x2="1746.328125" y1="951.53125" y2="951.53125" stroke="#000000" fill="none" style="stroke-width: 2; stroke-dasharray: 6, 2; marker-end: url(&quot;#markerArrowBlock&quot;);"></line></g><g class="note"><rect x="1766.328125" y="971.53125" width="258" height="102.796875" stroke="#000000" fill="#ffffff" style="stroke-width: 2;"></rect><text x="1771.328125" y="990.53125" style="font-size: 16px; font-family: &quot;Andale Mono&quot;, monospace;"><tspan x="1771.328125">start_seeding(result_handler)</tspan><tspan dy="1.2em" x="1771.328125">start_seed()</tspan><tspan dy="1.2em" x="1771.328125">connect-&gt;connect()</tspan><tspan dy="1.2em" x="1771.328125">handle_connect()</tspan><tspan dy="1.2em" x="1771.328125">handle_complete(result_handler)</tspan></text></g><g class="signal"><text x="1375.328125" y="1105.328125" style="font-size: 16px; font-family: &quot;Andale Mono&quot;, monospace;"><tspan x="1375.328125">callback: handle_started</tspan></text><line x1="1746.328125" x2="1196.328125" y1="1110.328125" y2="1110.328125" stroke="#000000" fill="none" style="stroke-width: 2; stroke-dasharray: 6, 2; marker-end: url(&quot;#markerArrowBlock&quot;);"></line></g><g class="note"><rect x="1216.328125" y="1130.328125" width="138" height="26" stroke="#000000" fill="#ffffff" style="stroke-width: 2;"></rect><text x="1221.328125" y="1149.328125" style="font-size: 16px; font-family: &quot;Andale Mono&quot;, monospace;"><tspan x="1221.328125">handle_started()</tspan></text></g><g class="signal"><text x="600.328125" y="1187.328125" style="font-size: 16px; font-family: &quot;Andale Mono&quot;, monospace;"><tspan x="600.328125">callback: handle_started</tspan></text><line x1="1196.328125" x2="196.328125" y1="1192.328125" y2="1192.328125" stroke="#000000" fill="none" style="stroke-width: 2; stroke-dasharray: 6, 2; marker-end: url(&quot;#markerArrowBlock&quot;);"></line></g><g class="note"><rect x="216.328125" y="1212.328125" width="122" height="26" stroke="#000000" fill="#ffffff" style="stroke-width: 2;"></rect><text x="221.328125" y="1231.328125" style="font-size: 16px; font-family: &quot;Andale Mono&quot;, monospace;"><tspan x="221.328125">handle_started</tspan></text></g><g class="signal"><text x="206.328125" y="1269.328125" style="font-size: 16px; font-family: &quot;Andale Mono&quot;, monospace;"><tspan x="206.328125">server_node.subscribe_stop(handle_stopped)</tspan></text><line x1="196.328125" x2="552.328125" y1="1274.328125" y2="1274.328125" stroke="#000000" fill="none" style="stroke-width: 2; marker-end: url(&quot;#markerArrowBlock&quot;);"></line></g><g class="signal"><text x="250.328125" y="1305.328125" style="font-size: 16px; font-family: &quot;Andale Mono&quot;, monospace;"><tspan x="250.328125">server_node.run(handle_running)</tspan></text><line x1="196.328125" x2="552.328125" y1="1310.328125" y2="1310.328125" stroke="#000000" fill="none" style="stroke-width: 2; marker-end: url(&quot;#markerArrowBlock&quot;);"></line></g><g class="note"><rect x="572.328125" y="1330.328125" width="202.65625" height="64.390625" stroke="#000000" fill="#ffffff" style="stroke-width: 2;"></rect><text x="577.984375" y="1349.328125" style="font-size: 16px; font-family: &quot;Andale Mono&quot;, monospace;"><tspan x="577.328125">run():</tspan><tspan dy="1.2em" x="577.328125">Http_server.start()</tspan><tspan dy="1.2em" x="577.328125">Websocket_server.start()</tspan></text></g><g class="note"><rect x="1216.328125" y="1414.71875" width="162" height="26" stroke="#000000" fill="#ffffff" style="stroke-width: 2;"></rect><text x="1221.328125" y="1433.71875" style="font-size: 16px; font-family: &quot;Andale Mono&quot;, monospace;"><tspan x="1221.328125">start upnp map port</tspan></text></g><g class="signal"><text x="589.328125" y="1471.71875" style="font-size: 16px; font-family: &quot;Andale Mono&quot;, monospace;"><tspan x="589.328125">super.run(handle_running)</tspan></text><line x1="552.328125" x2="826.328125" y1="1476.71875" y2="1476.71875" stroke="#000000" fill="none" style="stroke-width: 2; stroke-dasharray: 6, 2; marker-end: url(&quot;#markerArrowBlock&quot;);"></line></g><g class="note"><rect x="846.328125" y="1496.71875" width="234" height="45.1875" stroke="#000000" fill="#ffffff" style="stroke-width: 2;"></rect><text x="851.328125" y="1515.71875" style="font-size: 16px; font-family: &quot;Andale Mono&quot;, monospace;"><tspan x="851.328125">run():</tspan><tspan dy="1.2em" x="851.328125">attach_header_sync_session()</tspan></text></g><g class="signal"><text x="1267.328125" y="1572.90625" style="font-size: 16px; font-family: &quot;Andale Mono&quot;, monospace;"><tspan x="1267.328125">header_sync.start(handle_headers_synchronized)</tspan></text><line x1="826.328125" x2="2076.328125" y1="1577.90625" y2="1577.90625" stroke="#000000" fill="none" style="stroke-width: 2; marker-end: url(&quot;#markerArrowBlock&quot;);"></line></g><g class="note"><rect x="2096.328125" y="1597.90625" width="194" height="83.59375" stroke="#000000" fill="#ffffff" style="stroke-width: 2;"></rect><text x="2101.328125" y="1616.90625" style="font-size: 16px; font-family: &quot;Andale Mono&quot;, monospace;"><tspan x="2101.328125">handle_started():</tspan><tspan dy="1.2em" x="2101.328125">initialize()</tspan><tspan dy="1.2em" x="2101.328125">new_connection()</tspan><tspan dy="1.2em" x="2101.328125">connect(handle_connect)</tspan></text></g><g class="signal"><text x="1303.328125" y="1712.5" style="font-size: 16px; font-family: &quot;Andale Mono&quot;, monospace;"><tspan x="1303.328125">callback: handle_headers_synchronized</tspan></text><line x1="2076.328125" x2="826.328125" y1="1717.5" y2="1717.5" stroke="#000000" fill="none" style="stroke-width: 2; stroke-dasharray: 6, 2; marker-end: url(&quot;#markerArrowBlock&quot;);"></line></g><g class="note"><rect x="846.328125" y="1737.5" width="250" height="45.1875" stroke="#000000" fill="#ffffff" style="stroke-width: 2;"></rect><text x="851.328125" y="1756.5" style="font-size: 16px; font-family: &quot;Andale Mono&quot;, monospace;"><tspan x="851.328125">handle_headers_synchronized():</tspan><tspan dy="1.2em" x="851.328125">attach_block_sync_session()</tspan></text></g><g class="signal"><text x="1440.328125" y="1813.6875" style="font-size: 16px; font-family: &quot;Andale Mono&quot;, monospace;"><tspan x="1440.328125">block_sync.start(handle_running)</tspan></text><line x1="826.328125" x2="2310.328125" y1="1818.6875" y2="1818.6875" stroke="#000000" fill="none" style="stroke-width: 2; marker-end: url(&quot;#markerArrowBlock&quot;);"></line></g><g class="note"><rect x="2330.328125" y="1838.6875" width="210" height="45.1875" stroke="#000000" fill="#ffffff" style="stroke-width: 2;"></rect><text x="2335.328125" y="1857.6875" style="font-size: 16px; font-family: &quot;Andale Mono&quot;, monospace;"><tspan x="2335.328125">handle_started():</tspan><tspan dy="1.2em" x="2335.328125">connect reservation table</tspan></text></g><g class="signal"><text x="1472.328125" y="1914.875" style="font-size: 16px; font-family: &quot;Andale Mono&quot;, monospace;"><tspan x="1472.328125">callback: handle_running</tspan></text><line x1="2310.328125" x2="826.328125" y1="1919.875" y2="1919.875" stroke="#000000" fill="none" style="stroke-width: 2; stroke-dasharray: 6, 2; marker-end: url(&quot;#markerArrowBlock&quot;);"></line></g><g class="note"><rect x="846.328125" y="1939.875" width="330" height="45.1875" stroke="#000000" fill="#ffffff" style="stroke-width: 2;"></rect><text x="851.328125" y="1958.875" style="font-size: 16px; font-family: &quot;Andale Mono&quot;, monospace;"><tspan x="851.328125">handle_running():</tspan><tspan dy="1.2em" x="851.328125">subscribe_blockchain(handle_reorganized)</tspan></text></g><g class="signal"><text x="975.328125" y="2016.0625" style="font-size: 16px; font-family: &quot;Andale Mono&quot;, monospace;"><tspan x="975.328125">p2p.run()</tspan></text><line x1="826.328125" x2="1196.328125" y1="2021.0625" y2="2021.0625" stroke="#000000" fill="none" style="stroke-width: 2; marker-end: url(&quot;#markerArrowBlock&quot;);"></line></g><g class="note"><rect x="1216.328125" y="2041.0625" width="202" height="64.390625" stroke="#000000" fill="#ffffff" style="stroke-width: 2;"></rect><text x="1221.328125" y="2060.0625" style="font-size: 16px; font-family: &quot;Andale Mono&quot;, monospace;"><tspan x="1221.328125">run():</tspan><tspan dy="1.2em" x="1221.328125">connect peers</tspan><tspan dy="1.2em" x="1221.328125">attach_inbound_session()</tspan></text></g><g class="signal"><text x="1730.328125" y="2136.453125" style="font-size: 16px; font-family: &quot;Andale Mono&quot;, monospace;"><tspan x="1730.328125">inbound.start(handle_inbound_started)</tspan></text><line x1="1196.328125" x2="2560.328125" y1="2141.453125" y2="2141.453125" stroke="#000000" fill="none" style="stroke-width: 2; marker-end: url(&quot;#markerArrowBlock&quot;);"></line></g><g class="note"><rect x="2580.328125" y="2161.453125" width="242" height="64.390625" stroke="#000000" fill="#ffffff" style="stroke-width: 2;"></rect><text x="2585.328125" y="2180.453125" style="font-size: 16px; font-family: &quot;Andale Mono&quot;, monospace;"><tspan x="2585.328125">handle_started():</tspan><tspan dy="1.2em" x="2585.328125">create_acceptor()</tspan><tspan dy="1.2em" x="2585.328125">acceptor.listen(inbound_port)</tspan></text></g><g class="signal"><text x="1750.328125" y="2256.84375" style="font-size: 16px; font-family: &quot;Andale Mono&quot;, monospace;"><tspan x="1750.328125">callback: handle_inbound_started</tspan></text><line x1="2560.328125" x2="1196.328125" y1="2261.84375" y2="2261.84375" stroke="#000000" fill="none" style="stroke-width: 2; stroke-dasharray: 6, 2; marker-end: url(&quot;#markerArrowBlock&quot;);"></line></g><g class="note"><rect x="1216.328125" y="2281.84375" width="210" height="45.1875" stroke="#000000" fill="#ffffff" style="stroke-width: 2;"></rect><text x="1221.328125" y="2300.84375" style="font-size: 16px; font-family: &quot;Andale Mono&quot;, monospace;"><tspan x="1221.328125">handle_inbound_started():</tspan><tspan dy="1.2em" x="1221.328125">attach_outbound_session()</tspan></text></g><g class="signal"><text x="1899.328125" y="2358.03125" style="font-size: 16px; font-family: &quot;Andale Mono&quot;, monospace;"><tspan x="1899.328125">outbound.start(handle_running)</tspan></text><line x1="1196.328125" x2="2842.328125" y1="2363.03125" y2="2363.03125" stroke="#000000" fill="none" style="stroke-width: 2; marker-end: url(&quot;#markerArrowBlock&quot;);"></line></g><g class="note"><rect x="2862.328125" y="2383.03125" width="234" height="45.1875" stroke="#000000" fill="#ffffff" style="stroke-width: 2;"></rect><text x="2867.328125" y="2402.03125" style="font-size: 16px; font-family: &quot;Andale Mono&quot;, monospace;"><tspan x="2867.328125">handle_started():</tspan><tspan dy="1.2em" x="2867.328125">connect outbound_connections</tspan></text></g><g class="signal"><text x="1923.328125" y="2459.21875" style="font-size: 16px; font-family: &quot;Andale Mono&quot;, monospace;"><tspan x="1923.328125">callback: handle_running</tspan></text><line x1="2842.328125" x2="1196.328125" y1="2464.21875" y2="2464.21875" stroke="#000000" fill="none" style="stroke-width: 2; stroke-dasharray: 6, 2; marker-end: url(&quot;#markerArrowBlock&quot;);"></line></g><g class="note"><rect x="1216.328125" y="2484.21875" width="138" height="26" stroke="#000000" fill="#ffffff" style="stroke-width: 2;"></rect><text x="1221.328125" y="2503.21875" style="font-size: 16px; font-family: &quot;Andale Mono&quot;, monospace;"><tspan x="1221.328125">handle_running()</tspan></text></g><g class="signal"><text x="778.328125" y="2541.21875" style="font-size: 16px; font-family: &quot;Andale Mono&quot;, monospace;"><tspan x="778.328125">callback: handle_running</tspan></text><line x1="1196.328125" x2="552.328125" y1="2546.21875" y2="2546.21875" stroke="#000000" fill="none" style="stroke-width: 2; stroke-dasharray: 6, 2; marker-end: url(&quot;#markerArrowBlock&quot;);"></line></g><g class="note"><rect x="572.328125" y="2566.21875" width="146" height="45.1875" stroke="#000000" fill="#ffffff" style="stroke-width: 2;"></rect><text x="577.328125" y="2585.21875" style="font-size: 16px; font-family: &quot;Andale Mono&quot;, monospace;"><tspan x="577.328125">handle_running():</tspan><tspan dy="1.2em" x="577.328125">start_services()</tspan></text></g><g class="note"><rect x="572.328125" y="2631.40625" width="234" height="122" stroke="#000000" fill="#ffffff" style="stroke-width: 2;"></rect><text x="577.328125" y="2650.40625" style="font-size: 16px; font-family: &quot;Andale Mono&quot;, monospace;"><tspan x="577.328125">start_services():</tspan><tspan dy="1.2em" x="577.328125">start_authenticator()</tspan><tspan dy="1.2em" x="577.328125">start_query_services()</tspan><tspan dy="1.2em" x="577.328125">start_heartbeat_services()</tspan><tspan dy="1.2em" x="577.328125">start_block_services()</tspan><tspan dy="1.2em" x="577.328125">start_transaction_services()</tspan></text></g><g class="signal"><text x="278.328125" y="2784.40625" style="font-size: 16px; font-family: &quot;Andale Mono&quot;, monospace;"><tspan x="278.328125">callback: handle_running</tspan></text><line x1="552.328125" x2="196.328125" y1="2789.40625" y2="2789.40625" stroke="#000000" fill="none" style="stroke-width: 2; stroke-dasharray: 6, 2; marker-end: url(&quot;#markerArrowBlock&quot;);"></line></g><g class="note"><rect x="216.328125" y="2809.40625" width="138" height="26" stroke="#000000" fill="#ffffff" style="stroke-width: 2;"></rect><text x="221.328125" y="2828.40625" style="font-size: 16px; font-family: &quot;Andale Mono&quot;, monospace;"><tspan x="221.328125">handle_running()</tspan></text></g></svg>