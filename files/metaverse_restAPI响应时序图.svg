<?xml version="1.0" encoding="utf-8" standalone="no"?><!DOCTYPE svg PUBLIC "-//W3C//DTD SVG 20010904//EN" "http://www.w3.org/TR/2001/REC-SVG-20010904/DTD/svg10.dtd"><svg xmlns="http://www.w3.org/2000/svg" width="1284" height="746" xmlns:xlink="http://www.w3.org/1999/xlink"><source><![CDATA[
Note right of HttpServ: start()
Note right of HttpServ: run()
HttpServ-->MgServer: super.run()
Note right of MgServer: mg_mgr_poll()
Note right of MgServer: ev_handler():\non_http_req_handler()
MgServer-->HttpServ: virtual on_http_req_handler()
Note right of HttpServ: on_http_req_handler():\nrpc_request()
HttpServ->dispatch: dispatch_command()
Note right of dispatch: find explorer.command\nexplorer.command->invoke()
dispatch->getheight: invoke()
getheight->blockchain: get_last_height():\nblockchain.fetch_last_height
Note right of blockchain: fetch_last_height
blockchain->database: database.blocks.get()
]]></source><desc></desc><defs><marker viewBox="0 0 5 5" markerWidth="5" markerHeight="5" orient="auto" refX="5" refY="2.5" id="markerArrowBlock"><path d="M 0 0 L 5 2.5 L 0 5 z"></path></marker><marker viewBox="0 0 9.6 16" markerWidth="4" markerHeight="16" orient="auto" refX="9.6" refY="8" id="markerArrowOpen"><path d="M 9.6,8 1.92,16 0,13.7 5.76,8 0,2.286 1.92,0 9.6,8 z"></path></marker></defs><g class="title"></g><g class="actor"><rect x="10" y="20" width="84" height="36" stroke="#000000" fill="#ffffff" style="stroke-width: 2;"></rect><text x="20" y="44" style="font-size: 16px; font-family: &quot;Andale Mono&quot;, monospace;"><tspan x="20">HttpServ</tspan></text></g><g class="actor"><rect x="10" y="690.75" width="84" height="36" stroke="#000000" fill="#ffffff" style="stroke-width: 2;"></rect><text x="20" y="714.75" style="font-size: 16px; font-family: &quot;Andale Mono&quot;, monospace;"><tspan x="20">HttpServ</tspan></text></g><line x1="52" x2="52" y1="56" y2="690.75" stroke="#000000" fill="none" style="stroke-width: 2;"></line><g class="actor"><rect x="262" y="20" width="84" height="36" stroke="#000000" fill="#ffffff" style="stroke-width: 2;"></rect><text x="272" y="44" style="font-size: 16px; font-family: &quot;Andale Mono&quot;, monospace;"><tspan x="272">MgServer</tspan></text></g><g class="actor"><rect x="262" y="690.75" width="84" height="36" stroke="#000000" fill="#ffffff" style="stroke-width: 2;"></rect><text x="272" y="714.75" style="font-size: 16px; font-family: &quot;Andale Mono&quot;, monospace;"><tspan x="272">MgServer</tspan></text></g><line x1="304" x2="304" y1="56" y2="690.75" stroke="#000000" fill="none" style="stroke-width: 2;"></line><g class="actor"><rect x="480" y="20" width="84" height="36" stroke="#000000" fill="#ffffff" style="stroke-width: 2;"></rect><text x="490" y="44" style="font-size: 16px; font-family: &quot;Andale Mono&quot;, monospace;"><tspan x="490">dispatch</tspan></text></g><g class="actor"><rect x="480" y="690.75" width="84" height="36" stroke="#000000" fill="#ffffff" style="stroke-width: 2;"></rect><text x="490" y="714.75" style="font-size: 16px; font-family: &quot;Andale Mono&quot;, monospace;"><tspan x="490">dispatch</tspan></text></g><line x1="522" x2="522" y1="56" y2="690.75" stroke="#000000" fill="none" style="stroke-width: 2;"></line><g class="actor"><rect x="734" y="20" width="92" height="36" stroke="#000000" fill="#ffffff" style="stroke-width: 2;"></rect><text x="744" y="44" style="font-size: 16px; font-family: &quot;Andale Mono&quot;, monospace;"><tspan x="744">getheight</tspan></text></g><g class="actor"><rect x="734" y="690.75" width="92" height="36" stroke="#000000" fill="#ffffff" style="stroke-width: 2;"></rect><text x="744" y="714.75" style="font-size: 16px; font-family: &quot;Andale Mono&quot;, monospace;"><tspan x="744">getheight</tspan></text></g><line x1="780" x2="780" y1="56" y2="690.75" stroke="#000000" fill="none" style="stroke-width: 2;"></line><g class="actor"><rect x="974" y="20" width="100" height="36" stroke="#000000" fill="#ffffff" style="stroke-width: 2;"></rect><text x="984" y="44" style="font-size: 16px; font-family: &quot;Andale Mono&quot;, monospace;"><tspan x="984">blockchain</tspan></text></g><g class="actor"><rect x="974" y="690.75" width="100" height="36" stroke="#000000" fill="#ffffff" style="stroke-width: 2;"></rect><text x="984" y="714.75" style="font-size: 16px; font-family: &quot;Andale Mono&quot;, monospace;"><tspan x="984">blockchain</tspan></text></g><line x1="1024" x2="1024" y1="56" y2="690.75" stroke="#000000" fill="none" style="stroke-width: 2;"></line><g class="actor"><rect x="1170" y="20" width="84" height="36" stroke="#000000" fill="#ffffff" style="stroke-width: 2;"></rect><text x="1180" y="44" style="font-size: 16px; font-family: &quot;Andale Mono&quot;, monospace;"><tspan x="1180">database</tspan></text></g><g class="actor"><rect x="1170" y="690.75" width="84" height="36" stroke="#000000" fill="#ffffff" style="stroke-width: 2;"></rect><text x="1180" y="714.75" style="font-size: 16px; font-family: &quot;Andale Mono&quot;, monospace;"><tspan x="1180">database</tspan></text></g><line x1="1212" x2="1212" y1="56" y2="690.75" stroke="#000000" fill="none" style="stroke-width: 2;"></line><g class="note"><rect x="72" y="76" width="66" height="26" stroke="#000000" fill="#ffffff" style="stroke-width: 2;"></rect><text x="77" y="95" style="font-size: 16px; font-family: &quot;Andale Mono&quot;, monospace;"><tspan x="77">start()</tspan></text></g><g class="note"><rect x="72" y="122" width="50" height="26" stroke="#000000" fill="#ffffff" style="stroke-width: 2;"></rect><text x="77" y="141" style="font-size: 16px; font-family: &quot;Andale Mono&quot;, monospace;"><tspan x="77">run()</tspan></text></g><g class="signal"><text x="134" y="179" style="font-size: 16px; font-family: &quot;Andale Mono&quot;, monospace;"><tspan x="134">super.run()</tspan></text><line x1="52" x2="304" y1="184" y2="184" stroke="#000000" fill="none" style="stroke-width: 2; stroke-dasharray: 6, 2; marker-end: url(&quot;#markerArrowBlock&quot;);"></line></g><g class="note"><rect x="324" y="204" width="114" height="26" stroke="#000000" fill="#ffffff" style="stroke-width: 2;"></rect><text x="329" y="223" style="font-size: 16px; font-family: &quot;Andale Mono&quot;, monospace;"><tspan x="329">mg_mgr_poll()</tspan></text></g><g class="note"><rect x="324" y="250" width="178" height="45.1875" stroke="#000000" fill="#ffffff" style="stroke-width: 2;"></rect><text x="329" y="269" style="font-size: 16px; font-family: &quot;Andale Mono&quot;, monospace;"><tspan x="329">ev_handler():</tspan><tspan dy="1.2em" x="329">on_http_req_handler()</tspan></text></g><g class="signal"><text x="62" y="326.1875" style="font-size: 16px; font-family: &quot;Andale Mono&quot;, monospace;"><tspan x="62">virtual on_http_req_handler()</tspan></text><line x1="304" x2="52" y1="331.1875" y2="331.1875" stroke="#000000" fill="none" style="stroke-width: 2; stroke-dasharray: 6, 2; marker-end: url(&quot;#markerArrowBlock&quot;);"></line></g><g class="note"><rect x="72" y="351.1875" width="186" height="45.1875" stroke="#000000" fill="#ffffff" style="stroke-width: 2;"></rect><text x="77" y="370.1875" style="font-size: 16px; font-family: &quot;Andale Mono&quot;, monospace;"><tspan x="77">on_http_req_handler():</tspan><tspan dy="1.2em" x="77">rpc_request()</tspan></text></g><g class="signal"><text x="215" y="427.375" style="font-size: 16px; font-family: &quot;Andale Mono&quot;, monospace;"><tspan x="215">dispatch_command()</tspan></text><line x1="52" x2="522" y1="432.375" y2="432.375" stroke="#000000" fill="none" style="stroke-width: 2; marker-end: url(&quot;#markerArrowBlock&quot;);"></line></g><g class="note"><rect x="542" y="452.375" width="218" height="45.1875" stroke="#000000" fill="#ffffff" style="stroke-width: 2;"></rect><text x="547" y="471.375" style="font-size: 16px; font-family: &quot;Andale Mono&quot;, monospace;"><tspan x="547">find explorer.command</tspan><tspan dy="1.2em" x="547">explorer.command-&gt;invoke()</tspan></text></g><g class="signal"><text x="619" y="528.5625" style="font-size: 16px; font-family: &quot;Andale Mono&quot;, monospace;"><tspan x="619">invoke()</tspan></text><line x1="522" x2="780" y1="533.5625" y2="533.5625" stroke="#000000" fill="none" style="stroke-width: 2; marker-end: url(&quot;#markerArrowBlock&quot;);"></line></g><g class="signal"><text x="790" y="554.96875" style="font-size: 16px; font-family: &quot;Andale Mono&quot;, monospace;"><tspan x="790">get_last_height():</tspan><tspan dy="1.2em" x="790">blockchain.fetch_last_height</tspan></text><line x1="780" x2="1024" y1="588.75" y2="588.75" stroke="#000000" fill="none" style="stroke-width: 2; marker-end: url(&quot;#markerArrowBlock&quot;);"></line></g><g class="note"><rect x="1044" y="608.75" width="146" height="26" stroke="#000000" fill="#ffffff" style="stroke-width: 2;"></rect><text x="1049" y="627.75" style="font-size: 16px; font-family: &quot;Andale Mono&quot;, monospace;"><tspan x="1049">fetch_last_height</tspan></text></g><g class="signal"><text x="1034" y="665.75" style="font-size: 16px; font-family: &quot;Andale Mono&quot;, monospace;"><tspan x="1034">database.blocks.get()</tspan></text><line x1="1024" x2="1212" y1="670.75" y2="670.75" stroke="#000000" fill="none" style="stroke-width: 2; marker-end: url(&quot;#markerArrowBlock&quot;);"></line></g></svg>